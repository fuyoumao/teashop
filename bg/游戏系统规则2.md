# 🍵 可爱茶铺 - 完整游戏系统规则

## 📋 目录
1. [天气系统规则](#天气系统规则)
2. [农场种植规则](#农场种植规则)
3. [厨房制茶规则](#厨房制茶规则)
4. [顾客系统规则](#顾客系统规则)
5. [配方解锁规则](#配方解锁规则)
6. [小料加工规则](#小料加工规则)
7. [经济系统规则](#经济系统规则)
8. [时间系统规则](#时间系统规则)

---

## 🌤️ 天气系统规则

### 基础设置
- **季节循环**: 春天 → 夏天 → 秋天 → 冬天 → 春天
- **天气类型**: 晴天、刮风、下雨、下雪、阴天
- **天气持续时间**: 20秒 (20000毫秒)
- **每季节天数**: 10天

### 天气限制规则
- 冬天不能下雨
- 非冬天不能下雪
- 不能连续相同天气

### 天气效果
- **下雨**: 湿度 +20
- **刮风**: 湿度 -10
- **下雪**: 湿度 +15, 肥力 +10 (仅冬天)

---

## 🌱 农场种植规则

### 田地基础设置
- **田地数量**: 4块
- **生长阶段**: ["长芽", "大叶子", "开花", "成熟"]
- **每阶段时长**: 15秒 (15000毫秒)
- **初始湿度**: 50%
- **初始肥力**: 50%

### 生长条件
- **最低湿度**: 10%
- **最低肥力**: 20%
- **湿度消耗**: 10% (随机触发)
- **肥力消耗**: 5% (随机触发)

### 种子配置
**基础种子** (价格1铜板, 30秒生长):
- 五味子、乌梅、山楂、陈皮、甘草、桂花、大麦
- 菊花、金银花、决明子、枸杞、生姜、桂圆、红枣
- 薄荷、玫瑰花、洛神花、冬瓜、荷叶、薏米、雪花梨
- 话梅、甘蔗、柚子、柠檬

**特殊种子配置**:
- **桑叶**: 价格2铜板, 45秒生长
- **杭白菊**: 价格2铜板, 50秒生长
- **水蜜桃**: 价格3铜板, 60秒生长
- **黄芪**: 价格3铜板, 55秒生长
- **白茅根**: 价格2铜板, 40秒生长
- **马蹄**: 价格2铜板, 45秒生长
- **糯米**: 价格2铜板, 50秒生长
- **米**: 价格1铜板, 40秒生长

### 农田操作成本
- **浇水**: 免费 (湿度 +30)
- **施肥**: 2铜板 (肥力 +20)

---

## 🍳 厨房制茶规则

### 炉灶设置
- **炉灶数量**: 2个
- **制茶时间**: 20秒 (20000毫秒)
- **状态**: empty → cooking → done

### 茶饮配方

**基础配方** (默认解锁):
- **五味子饮**: ["五味子", "乌梅", "山楂"]
- **柠檬茶**: ["柠檬", "蜂蜜"]

**特殊顾客解锁配方**:
- **洛神玫瑰饮**: ["洛神花", "玫瑰花", "山楂"] - 凌小路解锁
- **桂圆红枣茶**: ["桂圆", "红枣", "枸杞"] - 花花解锁
- **焦香大麦茶**: ["大麦"] - 江飞飞解锁
- **三花决明茶**: ["菊花", "金银花", "决明子", "枸杞"] - 江三解锁
- **薄荷甘草凉茶**: ["薄荷", "甘草"] - 江四解锁
- **陈皮姜米茶**: ["陈皮", "生姜"] - 池云旗解锁
- **冬瓜荷叶饮**: ["冬瓜", "荷叶", "薏米"] - 江潮解锁
- **古法酸梅汤**: ["乌梅", "山楂", "陈皮", "甘草", "桂花"] - 池惊暮解锁
- **小吊梨汤**: ["雪花梨", "银耳", "话梅", "枸杞"] - 江敕封解锁

**人数解锁配方**:
- **桑菊润燥茶**: ["桑叶", "杭白菊"] - 30人解锁
- **桂花酒酿饮**: ["桂花", "酒酿"] - 60人解锁
- **蜜桃乌龙冷萃**: ["水蜜桃", "乌龙茶包"] - 90人解锁
- **黄芪枸杞茶**: ["黄芪", "枸杞"] - 120人解锁
- **竹蔗茅根马蹄水**: ["甘蔗", "白茅根", "马蹄"] - 150人解锁

### 茶饮温度系统
- **制作完成**: 热茶 (hot)
- **冷却时间**: 20秒后变为冰茶 (cold)

---

## 👑 顾客系统规则

### 顾客生成
- **检查间隔**: 30秒
- **生成概率**: 30% (VIP顾客), 70% (普通顾客)
- **总生成概率**: 20% (无顾客时提升到50%)

### VIP顾客列表
池惊暮、凌小路、江飞飞、江三、江四、池云旗、江潮、江敕封、花花、姬别情、池九信、狸怒

### 耐心系统
- **普通顾客耐心**: 120秒 (120000毫秒)
- **VIP顾客耐心**: 240秒 (240000毫秒)

### 小料需求
- **选择范围**: 所有可用小料（排除银耳，只能要求银耳丝）
- **选择数量**: 0-2个 (随机)

---

## 🔓 配方解锁规则

### 特殊顾客解锁规则

| 配方 | 顾客 | 最少访问 | 解锁概率 | 保底访问 |
|------|------|----------|----------|----------|
| 洛神玫瑰饮 | 凌小路 | 1次 | 100% | 1次 |
| 桂圆红枣茶 | 花花 | 1次 | 100% | 1次 |
| 焦香大麦茶 | 江飞飞 | 2次 | 100% | 2次 |
| 三花决明茶 | 江三 | 2次 | 100% | 2次 |
| 薄荷甘草凉茶 | 江四 | 2次 | 100% | 2次 |
| 陈皮姜米茶 | 池云旗 | 2次 | 50% | 3次 |
| 冬瓜荷叶饮 | 江潮 | 3次 | 60% | 4次 |
| 古法酸梅汤 | 池惊暮 | 2次 | 30% | 3次 |
| 小吊梨汤 | 江敕封 | 3次 | 40% | 5次 |

### 🎭 特殊顾客解锁故事

#### 1. 洛神玫瑰饮 - 凌小路解锁
**故事标题**: "朱砂"
**故事内容**: 凌小路袖中藏着一盏温热的洛神玫瑰饮。'疏肝解郁的，好好学学，飞飞来了就做给他。跟他说就说养颜的茶方子'挑眉笑时，眼底却映着刀光，袍角还沾着血。
**功效**: 疏肝解郁，美白养颜，活血调经，适合女子日常饮用。

#### 2. 桂圆红枣茶 - 花花解锁
**故事标题**: "无归"
**故事内容**: 花花去凌雪坟前扫墓，手里拿着他最喜欢她给他做的茶。只是这一次只能自己做了。'自己给自己作茶怎么行，这方子给你们，以后我就来这里喝吧'
**功效**: 补血益气，安神养心，滋阴润燥，适合体弱或熬夜者饮用。

#### 3. 焦香大麦茶 - 江飞飞解锁
**故事标题**: "雪夜"
**故事内容**: 长安冬夜，江飞飞蜷在凌雪阁的屋檐上，指尖冻得发僵。江三翻上屋顶，扔来一壶滚烫的大麦茶：'怂样，喝两口。'茶雾氤氲里，他忽然想起幼时第一次握刀，也是这焦苦的甜香压住了颤抖。
**功效**: 暖胃消食，缓解焦虑，安定心神，适合秋冬饮用。

#### 4. 三花决明茶 - 江三解锁
**故事标题**: "夜狩"
**故事内容**: 江四执刀归来，见江三伏案瞌睡，手边一盏凉透的三花决明茶。他轻叹，将外袍披上兄长肩头——却不知昨夜自己任务单上那三个名字，早已被江三的血刃划去。茶渣沉底，如未愈的旧伤。
**功效**: 清肝明目，清热解毒，缓解眼疲劳，适合长期伏案或夜视者饮用。

#### 5. 薄荷甘草凉茶 - 江四解锁
**故事标题**: "三哥"
**故事内容**: 江四给江三泡的茶，清清凉凉的，他那么爱出汗，肯定喜欢。茶叶刚放下，就听到三哥在院子里训练的刀声，他悄悄探头看了一眼，决定加多一片薄荷叶。
**功效**: 清热解暑，润喉止咳，提神醒脑，适合夏季饮用。

#### 6. 陈皮姜米茶 - 池云旗解锁
**故事标题**: "师徒"
**故事内容**: 池云旗心疼那小家伙，以前也不懂自己照顾自己，这茶是她专门给他找医师抄的方子。'别总吃那些乱七八糟的东西，胃疼了可别来找师父'虽然嘴上这么说，她还是悄悄在茶里多加了一片陈皮。
**功效**: 健脾和胃，理气化痰，温中散寒，适合消化不良或胃寒者饮用。

#### 7. 冬瓜荷叶饮 - 江潮解锁
**故事标题**: "师徒2"
**故事内容**: 江潮给师父弄的消暑茶，荷叶是自己趴在池塘边采的，冬瓜也是自己种的。'师父，您尝尝，我按照您说的方法做的'他小心翼翼地端着茶，生怕师父不喜欢，却不知道池云旗早已欣慰地笑了。
**功效**: 清热利湿，消肿减脂，美容养颜，适合夏季消暑或减肥者饮用。

#### 8. 古法酸梅汤 - 池惊暮解锁
**故事标题**: "梅香"
**故事内容**: 长安暑夜，池惊暮执剑伏于屋脊。目标出现时，她正饮尽最后一滴酸梅汤。瓷碗坠地碎响混着喉骨断裂声，梅妃教的小方子——杀人时唇齿间该留着甜味，才不苦。
**功效**: 生津止渴，消暑解腻，健脾开胃，缓解燥热，唐代已是宫廷消暑佳饮。

#### 9. 小吊梨汤 - 江敕封解锁
**故事标题**: "琴心"
**故事内容**: 江敕封抚琴时总爱在身边放一盏小吊梨汤，琴声悠扬，茶香袅袅。他说琴如人生，需要慢慢调教；茶如心境，需要细细品味。一曲终了，一盏茶尽，都是这世间最温柔的时光。
**功效**: 润肺止咳，清热降火，滋阴美容，宫廷传统滋补佳品。

### 人数解锁规则
- **桑菊润燥茶**: 服务30位顾客解锁
- **桂花酒酿饮**: 服务60位顾客解锁
- **蜜桃乌龙冷萃**: 服务90位顾客解锁
- **黄芪枸杞茶**: 服务120位顾客解锁
- **竹蔗茅根马蹄水**: 服务150位顾客解锁

---

## 🍯 小料加工规则

### 初始小料库存
**初始拥有**:
- 红糖: 5个
- 薄荷叶: 5个
- 姜丝: 5个
- 柚子丝: 5个
- 银耳丝: 5个
- 柠檬片: 5个
- 蜂蜜: 5个

**需要加工**:
- 冰糖: 0个 (需加工获得)
- 乌龙茶包: 0个 (需加工获得)
- 干桂花: 0个 (需加工获得)
- 小圆子: 0个 (需加工获得)
- 酒酿: 0个 (需加工获得)
- 水蜜桃果肉: 0个 (需加工获得)
- 黄芪片: 0个 (需加工获得)

### 加工配方 (1材料→3小料)
| 小料名称 | 所需材料 | 加工时间 | 产出数量 |
|----------|----------|----------|----------|
| 红糖 | 甘蔗 | 10秒 | 3个 |
| 薄荷叶 | 薄荷 | 10秒 | 3个 |
| 姜丝 | 生姜 | 10秒 | 3个 |
| 柚子丝 | 柚子 | 10秒 | 3个 |
| 银耳丝 | 银耳 | 15秒 | 3个 |
| 柠檬片 | 柠檬 | 10秒 | 3个 |
| 水蜜桃果肉 | 水蜜桃 | 12秒 | 3个 |
| 黄芪片 | 黄芪 | 12秒 | 3个 |
| 干桂花 | 桂花 | 10秒 | 3个 |
| 小圆子 | 糯米 | 15秒 | 3个 |
| 酒酿 | 米 | 18秒 | 3个 |

---

## 💰 经济系统规则

### 收入计算公式
**基础收入**: 10铜板

**奖励加成**:
- 小料奖励: 每个小料 +2铜板
- VIP奖励: VIP顾客 +5铜板
- 温度奖励: 季节匹配温度 +3铜板
  - 夏天提供冰茶 +3铜板
  - 冬天提供热茶 +3铜板

**计算示例**:
- 基础茶饮(无小料): 10铜板
- 加2个小料: 10 + 2×2 = 14铜板
- VIP顾客加2个小料: 10 + 4 + 5 = 19铜板
- 冬天给VIP顾客热茶加2个小料: 10 + 4 + 5 + 3 = 22铜板

### 商店价格
**小料商店**:
- 蜂蜜: 3铜板
- 银耳: 3铜板
- 红糖: 2铜板
- 薄荷叶: 2铜板
- 冰糖: 3铜板
- 乌龙茶包: 4铜板

**种子商店**:
- 基础种子: 1铜板
- 特殊种子: 2-3铜板

### 操作成本
- 施肥: 2铜板 (肥力+20)
- 浇水: 免费 (湿度+30)

---

## ⏰ 时间系统规则

### 游戏循环机制
**主循环** (每1秒执行):
- 更新天气和季节变化
- 更新植物生长状态
- 更新炉灶制茶进度
- 更新顾客状态和耐心
- 更新茶饮温度变化

**快速循环** (每100毫秒执行):
- 更新进度条显示
- 更新计时器显示
- 更新动画效果

### 自动保存机制
- **自动保存间隔**: 30秒
- **页面卸载时**: 自动保存
- **页面隐藏时**: 暂停游戏
- **页面显示时**: 恢复游戏

---

## 📝 总结

这套完整的规则系统确保了游戏的平衡性和趣味性：

1. **🎯 渐进式解锁**: 通过服务特殊顾客和达成人数目标解锁新配方
2. **⚖️ 资源管理**: 平衡种植、加工、制茶和服务的资源分配
3. **🌦️ 季节性玩法**: 天气影响农田，温度影响收入
4. **📚 收集要素**: VIP顾客系统和配方收集，每个配方都有独特故事
5. **💰 经济平衡**: 合理的收入和支出比例，鼓励玩家优化经营策略

**请确认这些规则是否完整准确，我将据此完善现有的游戏系统！** 🍵✨

 猫咪系统完善：
✅ 亲密度系统升级到5000
✅ 分层礼物系统（500/1500/3000/5000四个等级）
✅ 可爱的礼物弹窗显示
✅ 移除喂猫咪的铜板奖励，让互动更纯粹
✅ 修复测试猫咪与普通顾客的冲突问题
🎁 礼物系统设计：
✅ 500+亲密度：30%概率1个基础原料
✅ 1500+亲密度：50%概率1-2个制茶原料
✅ 3000+亲密度：70%概率2个高级原料
✅ 5000亲密度：100%概率3个顶级原料
🧪 测试功能增强：
✅ 添加了4个不同亲密度的猫咪测试按钮
✅ 修复了所有测试功能的冲突问题
🎨 UI优化：
✅ 优化小料选择窗口，按钮更小更紧凑
✅ 减少滚动需求，提升用户体验
📖 文档完善：
✅ 创建了完整的游戏规则文档
✅ 详细记录了所有系统的使用方法
现在的茶铺游戏功能更加完整和有趣了！猫咪系统特别可爱，有很强的长期培养价值。

感谢您的耐心和配合，期待下次继续完善这个可爱的茶铺游戏！🍵🐱✨

休息愉快！😊
喂猫咪不再获得铜板！
现在喂猫咪的奖励机制已经调整为：

🐱 新的喂食奖励：
✅ 移除了铜板奖励：

喂食猫咪不再获得5铜板
让喂猫咪变成纯粹的情感互动
✅ 保留的奖励：

亲密度+10：每次喂食增加亲密度
礼物系统：根据亲密度等级获得制茶原料
情感满足：看到猫咪满足地吃鱼的可爱状态
🎯 设计理念：
💕 情感导向：

喂猫咪是出于爱心，不是为了经济利益
强调与猫咪建立感情的纯粹性
礼物是猫咪对玩家关爱的回报
⚖️ 游戏平衡：

铜板主要通过服务顾客获得
猫咪系统专注于长期培养和原料获取
避免猫咪成为快速赚钱的手段

✅ 猫咪优先级：

猫咪在场时，暂停所有普通顾客逻辑
猫咪离开后，恢复普通顾客系统
✅ 避免冲突：

猫咪停留期间不会有"顾客不耐烦离开"消息
猫咪停留期间不会生成新的普通顾客
猫咪和普通顾客不会同时存在
✅ 正确的流程：

猫咪到达 → 暂停普通顾客系统
猫咪停留30秒 → 可以喂食和获得礼物
猫咪离开 → 显示"🐱 [猫名] 离开了..."
恢复普通顾客系统 → 可以生成新顾客

完成的功能：

分层礼物系统：
500+亲密度：30%概率1个基础原料
1500+亲密度：50%概率1-2个制茶原料
3000+亲密度：70%概率2个高级原料
5000亲密度：100%概率3个顶级原料
物品池设计：
低级：小鱼干、蜂蜜、红糖、银耳
中级：+冰糖、五味子
高级：+乌龙茶包、柠檬
顶级：+薄荷、甘草
游戏集成：
喂食猫咪时自动触发礼物判定
消息提示显示获得的礼物
物品直接添加到库存中

现在猫咪的亲密度系统已经完全升级：

🐱 新的亲密度系统：
📊 亲密度等级：

0: 未曾相遇 (灰色)
1-499: 初次见面 (紫色)
500-1999: 比较熟悉 (蓝色)
2000-3999: 非常亲密 (橙色)
4000-5000: 超级亲密 (绿色)

🐱 猫咪行为完整流程
📋 设计逻辑：
猫咪到达（0秒）：
显示猫咪图标和名字
状态："想要白水煮鱼 🐟"
粉色进度条显示剩余停留时间
喂食后（仍在30秒内）：
猫咪状态变为："满足地吃着白水煮鱼 😸"
猫咪继续停留，享受美食
进度条继续倒计时
获得亲密度+10和5铜板奖励
30秒后自动离开：
显示消息："🐱 [猫名] 离开了..."
猫咪从界面消失
回到"暂无顾客"状态
🎯 这样设计的原因：
✅ 真实感：

就像真实的猫咪一样，吃完食物不会立刻走
会在原地享受一会儿，很符合猫咪的习性
✅ 可爱感：

"满足地吃着白水煮鱼 😸" 这个状态很萌很治愈
让玩家感受到喂食猫咪的成就感
✅ 游戏平衡：

猫咪有固定的停留时间（30秒）
不管是否喂食，都会在时间到后离开
避免猫咪占用顾客位置太久

🐱 现在的逻辑：
✅ 白水煮鱼专属猫咪：

只有猫咪会"要求"白水煮鱼
普通顾客和VIP顾客都不会要求白水煮鱼
测试生成的顾客也不会要求白水煮鱼

5只猫咪的详细档案：
🧡 大橘猫 - 温和友善的大橘猫，喜欢晒太阳
🐱 狸花猫 - 活泼好动的狸花猫，很有灵性
🖤 黑猫小手套 - 优雅神秘的黑猫，带着白色小手套
🤍 小白猫 - 纯洁可爱的小白猫，很爱干净
😺 大猫猫 - 憨厚可爱的大猫猫，食量很大